# [Codetree] [Gold1 술래_잡기](https://www.codetree.ai/training-field/frequent-problems/pacman/description?page=3&pageSize=20)

## 목표
> k번에 걸쳐 술래잡기를 진행하는 동안 술래가 얻게된 점수를 출력하시오.

## 문제 조건
* n : 지도 크기
* m : 도망자 인원수
  * 좌우로만 이동, 시작은 오른쪽
  * 상하로만 이동, 시작은 아래쪽
* h : 나무의 개수
* x : 행의 위치
* y : 열의 위치
* k : 시뮬레이션 진행 횟수
* 나무와 도망자의 초기위치가 같을 수 있음

* $5 \leq n \leq 99 (단, n은 항상 홀수)$
* $1 \leq m, h \leq n^{2}$
* $1 \leq k \leq 100$
* $1 \leq x, y \leq n$

* 각각 1턴 씩 소모하며, k번 반복함
  * m명의 도망자가 움직임
  * 술래가 움직임
* 도망자는 술래와의 유클리드 거리가 3이하인 경우에만 도망침
  * 바라보고 있는 방향으로 1칸 움직일때, 격자를 벗어나지 않는 경우
    * 움직이려는 칸에 술래가 있다면 움직이지 않음
    * 움직이려는 칸에 술래가 없다면 해당 칸으로 이동
      * 나무가 있어도 문제 없음
  * 바라보고 있는 방향으로 1칸 움직였을 때, 격자를 벗어나는 경우
    * 방향을 반대로 틈
    * 해당 방향으로 1칸 움직일 때
      * 술래가 없다면 움직임
      * 술래가 있다면 안 움직임
* 술래의 이동 패턴
  * 초기 위치는 정 가운데, 초기에 바라보는 방향은 위
  * 시작시 위의 방향으로 움직이며, 달팽이 모양으로 움직임
  * 끝에 도달하는 경우 거꾸로 움직여 중심으로 이동함
  * 중심에 도달하면 다시 끝으로 움직임
  * 1턴 동안 1칸 움직임
    * 이동 방향이 틀어지는 위치라면 방향을 틀어줌
      * (1,1) 이거나 가운데 위치라면 방향을 바로 틀어줌
    * 이때, 바라보는 방향으로 3칸 이내에 술래가 존재한다면 도망자가 잡힘
      * 다만 나무가 있는 칸`만` 시야가 가림
      * t턴에 잡힌 도망자의 수 만큼 점 수를 얻음
      * 잡힌 도망자는 사라짐


## 추가로 고려해야 할 사항
없습니다.

## 풀기 전 생각한 풀이 과정
* 도망자의 경우 위치를 Key로 도망자의 세부정보를 Value로 갖는 TreeMap으로 저장
* 나무의 경우 위치 정보만 이용하여 TreeSet으로 저장
* 술래의 경우 단일 객체로 저장

* 술래의 경우 위치를 변경하는 구간이 정해져 있음
  * 시작 지점인 경우 
  * 0,0인 경우
  * 중간보다 위에 있는 경우
    * 반 대각선
    * 행의 위치 + 1 == 열의 위치
  * 중간보다 아래에 있는 경우
    * 주 대각선
    * 반 대각선

* 도망자의 경우 이동하는 방향이 정해져 있음
  * 맵을 벗어나는 경우

* 다음 과정을 K번 반복함
  * 도망자 이동
    * 다음 위치가 지도를 벗어난 경우 방향 전환
    * 현재 방향으로 한 칸 이동

  * 술래 이동
    * 술래가 현재 바라보는 방향으로 이동
    * 현재 위치에서 방향을 전환해야 하는 경우 방향 전환
    
  * 도망자 제거
    * 술래가 바라보는 방향 3칸 안에 도망자가 있다면 제거
    * 이때, 제거한 도망자 인원수 * k회차 의 값을 누적하여 점수에 기록함
    
* 점수를 출력함

## 풀면서 추가로 고려한 사항
* 처음에 도망자가 같은 위치에 여럿이 있는 경우를 생각하지 못함
  * 위치를 Key로 도망자들의 정보를 LinkedList로 갖는 TreeMap으로 교체함
* 도망자가 움직이는 로직에서 두 가지를 제대로 고려하지 못함
  * 지도를 벗어나는 경우 방향 변경
  * 다음 위치에 술래가 있는 경우 움직이지 않음 

## 느낀 점
12:43 시작
14:48 종료
소요시간 125분
너무 객체로 관리하려다보니 시간 낭비에 코드가 깔끔하지 않았습니다.
중간 중간 실수한 부분 찾느라 시간 낭비가 많았습니다.
도망자의 방향과 술래의 방향을 하나의 dr, dc로 관리하고, 술래는 1씩 변경, 도망자는 2씩 변경하는 방식을 활용할 수 있습니다.
